<div class="mgeneDetail">
  <div class="mgeneDetail_conetnt">
    <div class="mgene_title">
      {{geneID}} {{'gene_detail.gene_detail' | translate}}
    </div>

    <div class="mgene_page">
      <!-- 基因信息 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.gene_information' | translate}}</h4>
          <p *ngIf="geneInfoList['gene_id']">
            <span class="info_name">{{'gene_detail.gene_id' | translate}}</span>
            <span class="info_content">
              {{geneInfoList.gene_id}}
            </span>
            <span *ngIf="geneInfoList['url_ncbi_gene_id']" class="mlink">link to<a href="https://www.ncbi.nlm.nih.gov/gene/{{geneInfoList['url_ncbi_gene_id']}}" target="_blank">NCBI</a></span>
            <span *ngIf="geneInfoList['url_hgnc_gene_id']" class="mlink">link to<a href="https://www.genenames.org/data/gene-symbol-report/#!/hgnc_id/HGNC:{{geneInfoList['url_hgnc_gene_id']}}" target="_blank">HGNC</a></span>
            <span *ngIf="geneInfoList['url_ensembl_gene_id']" class="mlink">link to<a href=" https://www.ensembl.org/Homo_sapiens/Gene/Summary?g={{geneInfoList['url_ensembl_gene_id']}}" target="_blank">Ensembl</a></span>
            <span *ngIf="geneInfoList['url_genecard_gene_id']" class="mlink">link to<a href="https://www.genecards.org/cgi-bin/carddisp.pl?gene={{geneInfoList['url_genecard_gene_id']}}" target="_blank">GeneCards</a></span>
            <span *ngIf="geneInfoList['url_kegg_gene_id']" class="mlink">link to<a href="https://www.kegg.jp/dbget-bin/www_bget?ko:{{geneInfoList['url_kegg_gene_id']}}" target="_blank">KEGG</a></span>
            <span *ngIf="geneInfoList['url_mirbase_gene_id']" class="mlink">link to<a href=" http://www.mirbase.org/cgi-bin/mirna_entry.pl?acc={{geneInfoList['url_mirbase_gene_id']}}" target="_blank">miRBase</a></span>
          </p>
          <p *ngIf="geneInfoList['gene_symbol']">
            <span class="info_name">{{'gene_detail.gene_symbol' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['gene_symbol']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['gene_full_name']">
            <span class="info_name">{{'gene_detail.gene_full_name' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['gene_full_name']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['gene_other_symbol']">
            <span class="info_name">{{'gene_detail.gene_other_symbol' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['gene_other_symbol']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['tf_family']">
            <span class="info_name">{{'gene_detail.tf_family' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['tf_family']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['gene_chr']">
            <span class="info_name">{{'gene_detail.gene_chr' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['gene_chr']}}<span *ngIf="geneInfoList['gene_start']">:</span>{{geneInfoList['gene_start']}}<span *ngIf="geneInfoList['gene_end']">-</span>{{geneInfoList['gene_end']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['gene_map_loc']">
            <span class="info_name">{{'gene_detail.gene_map_loc' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['gene_map_loc']}}
            </span>
          </p>
          <p *ngIf="geneInfoList['genome_version']">
            <span class="info_name">{{'gene_detail.genome_version' | translate}}</span>
            <span class="info_content">
                {{geneInfoList['genome_version']}}
            </span>
          </p>
          <button *ngIf="btn_show" style="margin-left: 20px;" nz-button [nzSize]="'small'" nzType="primary" (click)="btnShow()">{{'gene_detail.showGeneID' | translate}}</button>
          <button *ngIf="!btn_show" style="margin-left: 20px;" nz-button [nzSize]="'small'" nzType="primary" (click)="btnShow()">{{'gene_detail.noShowGeneID' | translate}}</button>
          <!-- 转录本信息 -->
          <div class="transcripts_table" *ngIf="!btn_show">
              <ng-template #titleTemplate>
                  <div class="table-thead">
                      <div class="fRight">
                          <i class="iconfont icon-xiazai" (click)="down_transcripts()"></i>
                      </div>
                  </div>
              </ng-template>
              <nz-table [nzData]="rows" [nzScroll]="{x:'100%'}" nzShowPagination="false" [nzSize]="'small'" [nzTitle]="titleTemplate">
                  <thead>
                      <tr>
                          <th style="min-width:120px;" *ngFor="let thead of baseThead;index as i">{{thead.name}}</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let row of rows;index as idx">
                          <td style="min-width:10px; text-align: center;" *ngFor="let thead of baseThead">
                              <a href="https://www.ncbi.nlm.nih.gov/nuccore/{{geneInfoList['url_ncbi_gene_id']}}" target="_blank" *ngIf="thead.true_key=='rna_id'">{{row[thead.true_key]}}</a>
                              <span *ngIf="thead.true_key!='rna_id'">{{row[thead.true_key]}}</span>
                          </td>
                      </tr>
                  </tbody>
              </nz-table>
              <!-- <app-little-table [url]="defaultUrl" [pageEntity]="rna_params"></app-little-table> -->
          </div>
      </div>
      
      <!-- 样本表达量（FPKM） -->
      <div class="mgene_content">
          <h4>{{'gene_detail.expressive_information' | translate}}</h4>
         
          <div class="transcripts_table">
              <h5>{{'gene_detail.sample_expression' | translate}}</h5>
              <nz-tabset [nzSelectedIndex]="expressive_index" (nzSelectedIndexChange)="SelectedExpressiveChange($event)">
                <nz-tab nzTitle="基因">
                    <app-little-table [inRefreshShow]="false" [url]="expressive_defaultUrl" [pageEntity]="expressive_params_g"></app-little-table>
                </nz-tab>
                <nz-tab nzTitle="转录本">
                    <app-little-table [inRefreshShow]="false" [url]="expressive_defaultUrl" [pageEntity]="expressive_params_t"></app-little-table>
                </nz-tab>
              </nz-tabset>
          </div>

          <!-- 折线图 -->
          <div class="transcripts_table">
              <h5>{{'gene_detail.expression_polygraph' | translate}}</h5>
              <div id="lineChartDiv" class="mlineChartDiv">
              </div>
          </div>
      </div>

      <!-- 差异表达 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.differential_expression' | translate}}</h4>
          <div class="transcripts_table"><!-- 组间差异  [nzSelectedIndex]="groupDiff_index" (nzSelectedIndexChange)="SelectedGroupDiffChange($event)"-->
              <h5>{{'gene_detail.group_differences' | translate}}</h5>
              <nz-tabset>
                  <nz-tab nzTitle="基因">
                      <app-little-table [inRefreshShow]="false" [url]="groupDiff_defaultUrl" [pageEntity]="groupDiff_params_g"></app-little-table>
                  </nz-tab>
                  <nz-tab nzTitle="转录本">
                      <app-little-table [inRefreshShow]="false" [url]="groupDiff_defaultUrl" [pageEntity]="groupDiff_params_t"></app-little-table>
                  </nz-tab>
              </nz-tabset>
          </div>
          
          <div class="transcripts_table"> <!-- 样本差异 [nzSelectedIndex]="sampleDiff_index" (nzSelectedIndexChange)="SelectedSampleDiffChange($event)"-->
            <h5>{{'gene_detail.sample_differences' | translate}}</h5>
            <nz-tabset>
                <nz-tab nzTitle="基因">
                    <app-little-table [inRefreshShow]="false" [url]="sampleDiff_defaultUrl" [pageEntity]="sampleDiff_params_g"></app-little-table>
                </nz-tab>
                <nz-tab nzTitle="转录本">
                    <app-little-table [inRefreshShow]="false" [url]="sampleDiff_defaultUrl" [pageEntity]="sampleDiff_params_t"></app-little-table>
                </nz-tab>
            </nz-tabset>
          </div>
      </div>

      <!-- 表达量信息 -->
      <div class="mgene_content">
        <h4>{{'gene_detail.miRNA_second_structure' | translate}}</h4>
        <div class="transcripts_table">
          <p>下图展示miRNA的二级截图和reads与前体（precursor）的比对情况，reads来自于公共数据，与本项目数据无关。</p>
          <img [src]="precursor_image" class="m_img" />
        </div>
      </div>
    
      <!-- 变异信息 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.variation_information' | translate}}</h4>
          <div class="transcripts_table">
              <h5>SNP</h5>
              <app-little-table [inRefreshShow]="false" [url]="snp_defaultUrl" [pageEntity]="snp_params"></app-little-table>
          </div>

          <div class="transcripts_table">
              <h5>InDel</h5>
              <app-little-table [inRefreshShow]="false" [url]="indel_defaultUrl" [pageEntity]="indel_params"></app-little-table>
          </div>
      </div>

      <!-- 融合基因 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.fusion_gene' | translate}}</h4>
          <div class="transcripts_table">

          </div>
      </div>

      <!-- 序列信息 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.sequence_information' | translate}}</h4>
          <div class="transcripts_table">

          </div>
      </div>

      <!-- 功能注释信息 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.functional_annotation_information' | translate}}</h4>

          <div class="transcripts_table" *ngIf="go_f_flag">
              <h5>GO Molecular Function</h5>
                <div *ngFor="let item of go_f_list" >
                    <p class="table_title">{{item.level_1}}</p>
                    <div class="table_border table_srcoll">
                        <div *ngFor="let item_f of item['list']" class="goinfo">
                            <a href="http://amigo.geneontology.org/amigo/term/{{item_f.id}}" target="_blank">{{item_f.id}}</a>
                            &nbsp;
                            <span>{{item_f.desc}}</span>
                        </div>
                    </div>
                </div>
          </div>

          <div class="transcripts_table">
              <h5>KEGG Pathway</h5>
              <app-little-table [inRefreshShow]="false" [url]="kegg_way_url" [pageEntity]="go_molecular_params"></app-little-table>
          </div>

          <div class="transcripts_table" *ngIf="go_c_flag">
              <h5>GO Cellular Component</h5>
              <div *ngFor="let item of go_c_list" >
                  <p class="table_title">{{item.level_1}}</p>
                  <div class="table_border table_srcoll">
                      <div *ngFor="let item_f of item['list']" class="goinfo">
                          <a href="http://amigo.geneontology.org/amigo/term/{{item_f.id}}" target="_blank">{{item_f.id}}</a>
                          &nbsp;
                          <span>{{item_f.desc}}</span>
                      </div>
                  </div>
              </div>
          </div>

          <div class="transcripts_table" *ngIf="go_b_flag">
              <h5>GO Biological Process</h5>
              <div *ngFor="let item of go_b_list" >
                  <p class="table_title">{{item.level_1}}</p>
                  <div class="table_border table_srcoll">
                      <div *ngFor="let item_f of item['list']" class="goinfo">
                          <a href="http://amigo.geneontology.org/amigo/term/{{item_f.id}}" target="_blank">{{item_f.id}}</a>
                          &nbsp;
                          <span>{{item_f.desc}}</span>
                      </div>
                  </div>
              </div>
          </div>

      </div>

      <!-- 文献信息 -->
      <div class="mgene_content">
          <h4>{{'gene_detail.document_information' | translate}}</h4>
          <div class="transcripts_table table_border">
              <nz-spin [nzSpinning]="isSpinning" [nzSize]="'small'">
                <div *ngFor="let item of documentList; let i=index" style="margin-top:5px;">
                    <p>
                        <span>{{i + 1}}</span>.
                        <a href="https://www.ncbi.nlm.nih.gov/pubmed/{{item.PubMed_ID}}" target="_blank">{{item.ArticleTitle}}</a>
                    </p>
                    <p>{{item.Author}}&nbsp;{{item.ISOAbbreviation}}&nbsp;{{item.JournalIssuem}}&nbsp;PMID&nbsp;{{item.PubMed_ID}}&nbsp;{{item.PublishTime}}</p>
                </div>
              </nz-spin>
          </div>
          <button *ngIf="load_more_show" nz-button [nzSize]="'small'" nzType="default" (click)="loadMore()">加载更多</button>
      </div>
    
    </div>
  </div>
</div>