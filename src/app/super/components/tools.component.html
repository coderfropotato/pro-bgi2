<div class="tool-component">
    <nz-drawer [nzClosable]="true" [nzVisible]="toolsService['visible']" [nzMaskClosable]="true" [nzBodyStyle]="{ padding: '12px' }" [nzWrapClassName]="'tools-wrap'" [nzWidth]="376" nzPlacement="right" nzTitle="请选择一个分析方案" (nzOnClose)="close()" >
        gene:{{ toolsService["geneCount"] }}
        <ul class="clearfix">
            <li *ngFor="let tool of toolList; index as i" (click)="selectParams(tool['type'])" >
                <img src="http://temp.im/68x82" (mouseover)="handlerMouseOver(tool)" />
                <p style="margin-top:12px;">{{ tool["name"] }}</p>
            </li>
        </ul>
        <div class="tools-desc" *ngIf="desc && title">
            <h5>{{ title }}</h5>
            <p>{{ desc }}</p>
        </div>

        <!-- 聚类 -->
        <nz-drawer nzTitle="聚类热图" [nzVisible]="childVisible && selectType=='heatmap'" [nzClosable]="true" [nzMaskStyle]="{ 'background-color': 'transparent' }" [nzMaskClosable]="true" [nzBodyStyle]="{ padding: '12px' }" [nzWrapClassName]="'tools-wrap'" [nzWidth]="376" nzPlacement="right" (nzOnClose)="handlerChildClose()" >
            <nz-tabset [nzSize]="'small'">
                <nz-tab nzTitle="表达量聚类">
                    <div class="tool-params-tab">
                        <p *ngIf="expressData.length || expressUpload.length">数据选择</p>
                        <span *ngIf="expressData.length && expressUpload.length">原始数据</span>
                        <div *ngIf="expressData.length">
                            <button (click)="handlerExpressSelect(ex)" [class.active]="ex['checked']" *ngFor="let ex of expressData;index as i;" nz-button nzType="default" nzSize="middle">{{ex['name']}}</button>
                        </div>
                        <span *ngIf="expressUpload.length">上传数据</span>
                        <div *ngIf="expressUpload.length">
                            <button (click)="handlerExpressSelect(exup)" [class.active]="exup['checked']" *ngFor="let exup of expressUpload;index as i;" nz-button nzType="default" nzSize="middle">{{exup['name']}}</button>
                        </div>
                        <nz-alert *ngIf="expressError" nzShowIcon nzType="warning" nzMessage="请选择1~20组数据作图"></nz-alert>
                        <p *ngIf="geneType.length">基因分类</p>
                        <div *ngIf="geneType.length">
                            <button (click)="handlerGeneSelect(type)" [class.active]="type['checked']" *ngFor="let type of geneType;index as i;" nz-button nzType="default" nzSize="middle">{{type['name']}}</button>
                        </div>
                        <p *ngIf="!expressData.length && !expressUpload.length && !geneType.length" class="center">暂无参数</p>
                    </div>
                    <nz-divider></nz-divider>
                    <div *ngIf="(expressData.length || expressUpload.length) && geneType.length" class="tool-params-button-group">
                        <button nz-button nzType="default" (click)="heatmapCancel()" nzSize="middle">取消</button>
                        <button nz-button nzType="primary" (click)="heatmapConfirm('express')" nzSize="middle">确定</button>
                    </div>
                </nz-tab>
                <nz-tab nzTitle="差异聚类">
                    <div class="tool-params-tab">
                        <p *ngIf="diffData.length || diffUpload.length">数据选择</p>
                        <span *ngIf="diffData.length && diffUpload.length">原始数据</span>
                        <div *ngIf="diffData.length">
                            <button (click)="ex['checked'] = !ex['checked']" [class.active]="ex['checked']" *ngFor="let ex of diffData;index as i;" nz-button nzType="default" nzSize="middle">{{ex['name']}}</button>
                        </div>
                        <span *ngIf="diffUpload.length">上传数据</span>
                        <div *ngIf="diffUpload.length">
                            <button (click)="exup['checked'] = !exup['checked']" [class.active]="exup['checked']" *ngFor="let exup of diffUpload;index as i;" nz-button nzType="default" nzSize="middle">{{exup['name']}}</button>
                        </div>
                        <nz-alert *ngIf="diffError" nzShowIcon nzType="warning" nzMessage="请选择1~20组数据作图"></nz-alert>
                        <p *ngIf="geneType.length">基因分类</p>
                        <div *ngIf="geneType.length">
                            <button (click)="handlerGeneSelect(type)" [class.active]="type['checked']" *ngFor="let type of geneType;index as i;" nz-button nzType="default" nzSize="middle">{{type['name']}}</button>
                        </div>
                        <p *ngIf="!diffData.length && !diffUpload.length && !geneType.length" class="center">暂无参数</p>
                    </div>
                    <nz-divider></nz-divider>
                    <div *ngIf="(diffData.length || diffUpload.length) && geneType.length" class="tool-params-button-group">
                        <button nz-button nzType="default" (click)="heatmapCancel()" nzSize="middle">取消</button>
                        <button nz-button nzType="primary" (click)="heatmapConfirm('diff')" nzSize="middle">确定</button>
                    </div>
                </nz-tab>
                <nz-tab nzTitle="自定义数据聚类">
                    <div class="tool-params-tab">
                        <p *ngIf="customData.length || customUpload.length">数据选择</p>
                        <span *ngIf="customData.length && customUpload.length">原始数据</span>
                        <div *ngIf="customData.length">
                            <button (click)="ex['checked'] = !ex['checked']" [class.active]="ex['checked']" *ngFor="let ex of customData;index as i;" nz-button nzType="default" nzSize="middle">{{ex['name']}}</button>
                        </div>
                        <span *ngIf="customUpload.length">上传数据</span>
                        <div *ngIf="customUpload.length">
                            <button (click)="exup['checked'] = !exup['checked']" [class.active]="exup['checked']" *ngFor="let exup of customUpload;index as i;" nz-button nzType="default" nzSize="middle">{{exup['name']}}</button>
                        </div>
                        <nz-alert *ngIf="customError" nzShowIcon nzType="warning" nzMessage="请选择1~20组数据作图"></nz-alert>
                        <p *ngIf="geneType.length">基因分类</p>
                        <div *ngIf="geneType.length">
                            <button (click)="handlerGeneSelect(type)" [class.active]="type['checked']" *ngFor="let type of geneType;index as i;" nz-button nzType="default" nzSize="middle">{{type['name']}}</button>
                        </div>
                        <p *ngIf="!customData.length && !customUpload.length && !geneType.length" class="center">暂无参数</p>
                    </div>
                    <nz-divider></nz-divider>
                    <div *ngIf="(customData.length || customUpload.length) && geneType.length" class="tool-params-button-group">
                        <button nz-button nzType="default" (click)="heatmapCancel()" nzSize="middle">取消</button>
                        <button nz-button nzType="primary" (click)="heatmapConfirm('custom')" nzSize="middle">确定</button>
                    </div>
                </nz-tab>
            </nz-tabset>
        </nz-drawer>
    </nz-drawer>
</div>
